name: Infinity Disrupt
type: flying
//aiController: FlyingFollowAI::new
envDisabled: 0
lowAltitude: false
flying: true
drag: 0.07
speed: 1
rotateSpeed: 2
accel: 0.1
health: 12000
armor: 9
hitSize: 46
payloadCapacity: 600
targetAir: false
engineSize: 6
engineOffset: 25.25

//float orbRad: 5f, partRad: 3
//int parts: 10

abilities: [
        {
        type: SuppressionFieldAbility
	orbRadius: 5
	particleSize: 3
	y: 10
	particles: 10
        }
]

/*
for(int i : Mathf.signs){
	abilities.add(new SuppressionFieldAbility(){{
		orbRadius: orbRad
		particleSize: partRad
		y: -32f / 4
		x: 43f * i / 4
		particles: parts
		//visual only, the middle one does the actual suppressing
		display: active: false
	}})
}
*/

weapons: [
         {
        name: infinity-disrupt-weapon
	shootSound: missileLarge
	x: 19.5
	y: -2.5
	mirror: true
	rotate: true
	rotateSpeed: 0.4
	reload: 70
	layerOffset: -20
	recoil: 1
	rotationLimit: 22
	minWarmup: 0.95
	shootWarmupSpeed: 0.1
	shootY: 2
	shootCone: 40
	shoot.shots: 3
	shoot.shotDelay: 5
	inaccuracy: 28

	parts: [
               {
                type: RegionPart
                suffix: -blade
		heatProgress: warmup
		progress: {
                      progress: warmup
                      op: blend
                      amount: 0.15
                      other: {
                            progress: reload
                      }
                }
		heatColor: 9c50ff
		x: 1.25
		y: 0
		moveRot: -33
		moveY: -1
		moveX: -1
		under: true
		mirror: true
	}
        ]
	bullet: new BulletType(){{
		shootEffect: Fx.sparkShoot
		smokeEffect: Fx.shootSmokeTitan
		hitColor: Pal.suppress
		shake: 1
		speed: 0
		keepVelocity: false
		collidesAir: false

		spawnUnit: new MissileUnitType("disrupt-missile"){{
			targetAir: false
			speed: 4.6
			maxRange: 5
			outlineColor: Pal.darkOutline
			health: 70
			homingDelay: 10
			lowAltitude: true
			engineSize: 3
			engineColor: 
			trailColor: Pal.sapBulletBack
			engineLayer: Layer.effect
			deathExplosionEffect: Fx.none
			loopSoundVolume: 0.1

			parts.add(new ShapePart(){{
				layer: Layer.effect
				circle: true
				y: -0.25
				radius: 1.5
				color: Pal.suppress
				colorTo: Color.white
				progress: PartProgress.life.curve(Interp.pow5In)
			}})

			parts.add(new RegionPart("-fin"){{
				mirror: true
				progress: PartProgress.life.mul(3f).curve(Interp.pow5In)
				moveRot: 32
				rotation: -6
				moveY: 1.5
				x: 3f / 4
				y: -6f / 4
			}})

			weapons.add(new Weapon(){{
				shootCone: 360
				mirror: false
				reload: 1
				shootOnDeath: true
				bullet: new ExplosionBulletType(140f, 25f){{
					collidesAir: false
					suppressionRange: 140
					shootEffect: new ExplosionEffect(){{
						lifetime: 50
						waveStroke: 5
						waveLife: 8
						waveColor: Color.white
						sparkColor: 
						smokeColor: Pal.suppress
						waveRad: 40
						smokeSize: 4
						smokes: 7
						smokeSizeBase: 0
						sparks: 10
						sparkRad: 40
						sparkLen: 6
						sparkStroke: 2
					}}
				}}
			}})
		}}
	}}
}})

setEnginesMirror(
new UnitEngine(95 / 4f, -56 / 4f, 5f, 330f),
new UnitEngine(89 / 4f, -95 / 4f, 4f, 315f)
)
}}
